@startuml uc06
title "Use Case #6: Delete Account"

'Styling goes here
hide footbox
skinparam stereotypePosition bottom
skinparam sequenceMessageAlign direction
skinparam sequence {
	LifeLineBorderColor #Silver
	LifeLineBackgroundColor #Gainsboro
}

'Add a legend plus styling
skinparam legend {
	backgroundColor #GhostWhite
	entrySeparator #GhostWhite
}

legend top
	<#GhostWhite,#GhostWhite>|	|= __Legend__ |
	|<#red> | Clientside|
	|<#silver> | Serverside|
endlegend

'Setup the objects
actor User as u <<Actor>> #red
boundary App as a <<Boundary>> #red
boundary UserSettingsScreen as uss <<Boundary>>
control DatabaseManager as db <<Control>>
boundary Database as db <<Boundary>>

'Setup persistent objects here
activate u
activate a

'--- FLOW OF CONTROL STARTS HERE ---

'User navigates to the "User settings page
u -> a: <user navigates to the User Settings page>
a -> uss: show()
activate uss

'User clicks "Delete Account" button
u -> uss: <user clicks "Delete Account" button>

'Users device sends a deletion request to the server
uss -> db: User sends a deletion request to the server
activate db


'Server challenges user to verify the authenticity of the user
db -> u: server challenges user to verify authenticity and sends email containing confirmation link to confirm deletion

'User recieves the email and clicks the link to finish the process of deleting account
u -> db: User uses email link to confirm deletion of their account

'Database manager marks the account for deletion and sends the user a notification via email
db -> db: Database manager marks account in the database for deletion
activate db

'Database manager sends notification email once account is marked for deletion
db -> u: Database manager sends notification abount successful deletion mark
'--- FLOW OF CONTROL ENDS HERE   ---


@enduml